/* jQuery Notify UI Widget 1.5 by Eric Hynds
 * http://www.erichynds.com/jquery/a-jquery-ui-growl-ubuntu-notification-widget/
 *
 * Depends:
 *   - jQuery 1.4
 *   - jQuery UI 1.8 widget factory
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
*/
(function(d){d.widget("ech.notify",{options:{speed:500,expires:5E3,stack:"below",custom:!1,queue:!1},_create:function(){var a=this;this.templates={};this.keys=[];this.element.addClass("ui-notify").children().addClass("ui-notify-message ui-notify-message-style").each(function(c){c=this.id||c;a.keys.push(c);a.templates[c]=d(this).removeAttr("id").wrap("<div></div>").__super().html()}).end().empty().show()},create:function(a,c,b){"object"===typeof a&&(b=c,c=a,a=null);a=this.templates[a||this.keys[0]];b&&b.custom&&(a=d(a).removeClass("ui-notify-message-style").wrap("<div></div>").__super().html());this.openNotifications=this.openNotifications||0;return(new d.ech.notify.instance(this))._create(c,d.extend({},this.options,b),a)}});d.extend(d.ech.notify,{instance:function(a){this.__super=a;this.isOpen=!1}});d.extend(d.ech.notify.instance.prototype,{_create:function(a,c,b){this.options=c;var e=this,b=b.replace(/#(?:\{|%7B)(.*?)(?:\}|%7D)/g,function(c,b){return b in a?a[b]:""}),b=this.element=d(b),f=b.find(".ui-notify-close");"function"===typeof this.options.click&&b.addClass("ui-notify-click").bind("click",function(a){e._trigger("click",a,e)});f.length&&f.bind("click",function(){e.close();return!1});this.__super.element.queue("notify",function(){e.open();"number"===typeof c.expires&&0<option.expires&&setTimeout(d.proxy(e.close,e),c.expires)});(!this.options.queue||this.__super.openNotifications<=this.options.queue-1)&&this.__super.element.dequeue("notify");return this},close:function(){var a=this.options.speed;this.element.fadeTo(a,0).slideUp(a,d.proxy(function(){this._trigger("close");this.isOpen=!1;this.element.remove();this.__super.openNotifications-=1;this.__super.element.dequeue("notify")},this));return this},open:function(){if(this.isOpen||!1===this._trigger("beforeopen"))return this;var a=this;this.__super.openNotifications+=1;this.element["above"===this.options.stack?"prependTo":"appendTo"](this.__super.element).css({display:"none",opacity:""}).fadeIn(this.options.speed,function(){a._trigger("open");a.isOpen=!0});return this},widget:function(){return this.element},_trigger:function(a,c,b){return this.__super._trigger.call(this,a,c,b)}})})(jQuery);
